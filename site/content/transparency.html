---
title: Transparency
subTitle: Sharing the Road to Insomnia
slug: transparency
type: skinny
---


<script src='//cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js'></script>
<script src='/baremetrics.js'></script>

<h2>Revenue</h2>
<canvas id='chart-money'></canvas>
<h2>Customers</h2>
<canvas id='chart-customers'></canvas>
<h2>Churn</h2>
<canvas id='chart-churn'></canvas>

<script>
  (function () {
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    const colors = {
      green: [80, 220, 0],
      blue: [28, 144, 255],
      red: [255, 0, 20],
      orange: [255, 180, 40],
      pink: [255, 180, 255],
      purple: [200, 80, 255]
    };

    function printDate (yearMonthDay) {
      const parts = yearMonthDay.split(/[-/]/);
      const year = parts[0];
      const month = months[parts[1] - 1];
      const day = parts[2];
      return month + ' ' + day + ', ' + year;
    }

    function isFirstOfMonth (yearMonthDay) {
      return yearMonthDay.split(/[-/]/)[2] === '01';
    }

    function formatMoney (cents) {
      return cents / 100;
    }

    function drawMetric (id, chartType, type, datasets) {
      const metrics = [];
      let current = {};
      for (let i = 0; i < window.metrics.metrics.length; i++) {
        const item = window.metrics.metrics[i];
        if (isFirstOfMonth(item.human_date)) {
          current = JSON.parse(JSON.stringify(item));
          metrics.push(current);
          current.label = printDate(item.human_date);
        } else {
          current.net_revenue += item.net_revenue;
          current.new_customers += item.new_customers;
        }
      }


      console.log('METRICS', metrics);
      new Chart(document.getElementById('chart-' + id).getContext('2d'), {
        type: chartType || 'bar',
        data: {
          labels: metrics.map(item => item.label),
          datasets: datasets.map(set => ({
            label: set.label,
            data: metrics.map(
              item => type === 'money' ? formatMoney(item[set.key]) : item[set.key]
            ),
            backgroundColor: 'rgba(' + colors[set.color].join(',') + ',0.7)',
            borderColor: 'rgb(' + colors[set.color].join(',') + ')',
            borderWidth: 0
          }))
        },
        options: {
          scales: {
            xAxes: [{
              barPercentage: 0.9,
              categoryPercentage: 0.8,
              ticks: {autoSkip: false}
            }],
            yAxes: [{
              ticks: {
                beginAtZero: true,
                callback: function (value) {
                  return type === 'money'
                    ? '$' + value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
                    : value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
                }
              }
            }]
          }
        }
      });
    }

    drawMetric('money', 'bar', 'money', [{
      key: 'mrr',
      label: 'MRR',
      color: 'green'
    }, {
      key: 'net_revenue',
      label: 'Net Revenue',
      color: 'blue'
    }]);

    drawMetric('churn', 'bar', '', [{
      key: 'user_churn',
      label: 'User Churn',
      color: 'orange'
    }, {
      key: 'revenue_churn',
      label: 'Revenue Churn',
      color: 'red'
    }]);

    drawMetric('customers', 'bar', '', [{
      key: 'new_customers',
      label: 'New Customers',
      color: 'pink'
    }, {
      key: 'active_customers',
      label: 'Active Customers',
      color: 'purple'
    }]);
  })();
</script>
